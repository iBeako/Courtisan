@startuml
package "Game Server" {
    class Server {
        - PORT: int = 8080
        - peer: WebSocketMultiplayerPeer
        + _on_client_connected(client_id)
        + _on_client_disconnected(client_id)
        + receive_message(message)
        + send_message(message)
    }
    
    class GameSession {
        - session_id: int
        - session_player_max: int
        - players: List
        + add_player(player_id)
        + remove_player(player_id)
        + check_game_start()
        + load_game()
    }
    
    class CheckAction {
        - original_move
        - dictionary
        + send_back_error(adress: String)
        + broadcasting()
        + check_card_placement(json_string)
        + end_game()
    }
}

package "Globals (Autoload)" {
    class GLOBALS {
        + Family {DEFAULT, PAPILLON, CRAPAUD, ROSSIGNOL, LIEVRE, CERF, CARPE}
        + Spec {IDLE, NOBLE, ESPION, ASSASSIN, GARDE}
        + family_to_string(f: Family) -> String
        + spec_to_string(s: Spec) -> String
        + string_to_family(family_str: String) -> Family
        + string_to_spec(spec_str: String) -> Spec
        + add_player(player_id: int)
        + remove_player(player_id: int)
    }
}

Server --> GameSession : Manages
GameSession --> GLOBALS : Uses
GameSession --> CheckAction : Calls

note right of Server
    Manage client connection and cummunication (Minimal function for now)
end note
@enduml
